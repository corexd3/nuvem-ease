(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{594:(e,t,r)=>{"use strict";r.d(t,{Y:()=>u});var s=r(5155),a=r(7270),n=r(1647),l=r(3998),d=r(7828),i=r(1330);let c={pending:"outline",authorized:"default",cancelled:"destructive",rejected:"destructive",processing:"secondary"},o={pending:"Pendente",authorized:"Autorizada",cancelled:"Cancelada",rejected:"Rejeitada",processing:"Processando"};function u(e){let{invoices:t,onViewDetails:r}=e;return(0,s.jsx)("div",{className:"rounded-lg border bg-card",children:(0,s.jsxs)(a.XI,{children:[(0,s.jsx)(a.A0,{children:(0,s.jsxs)(a.Hj,{children:[(0,s.jsx)(a.nd,{children:"N\xfamero"}),(0,s.jsx)(a.nd,{children:"Cliente"}),(0,s.jsx)(a.nd,{children:"Valor"}),(0,s.jsx)(a.nd,{children:"Status"}),(0,s.jsx)(a.nd,{children:"Data"}),(0,s.jsx)(a.nd,{className:"text-right",children:"A\xe7\xf5es"})]})}),(0,s.jsx)(a.BF,{children:0===t.length?(0,s.jsx)(a.Hj,{children:(0,s.jsx)(a.nA,{colSpan:6,className:"text-center text-muted-foreground py-8",children:"Nenhuma nota fiscal encontrada"})}):t.map(e=>(0,s.jsxs)(a.Hj,{children:[(0,s.jsx)(a.nA,{className:"font-medium",children:e.numero}),(0,s.jsx)(a.nA,{children:e.customer_name||"â€”"}),(0,s.jsx)(a.nA,{children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(Number(e.total_value))}),(0,s.jsx)(a.nA,{children:(0,s.jsx)(n.E,{variant:c[e.status]||"default",children:o[e.status]||e.status})}),(0,s.jsx)(a.nA,{children:(0,i.GP)(new Date(e.issued_at),"dd/MM/yyyy HH:mm")}),(0,s.jsx)(a.nA,{className:"text-right",children:(0,s.jsx)(l.$,{variant:"ghost",size:"sm",onClick:()=>null==r?void 0:r(e),children:(0,s.jsx)(d.A,{className:"h-4 w-4"})})})]},e.id))})]})})}},706:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>b});var s=r(5155),a=r(2115),n=r(63),l=r(4585),d=r(9253),i=r(9708),c=r(9750),o=r(1871),u=r(6948);function x(e){let{title:t,value:r,icon:a,trend:n,variant:l="default"}=e;return(0,s.jsx)(u.Zp,{children:(0,s.jsx)(u.Wu,{className:"p-6",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground font-medium",children:t}),(0,s.jsx)("p",{className:"text-3xl font-bold",children:r}),n&&(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:n})]}),(0,s.jsx)("div",{className:"p-3 rounded-lg ".concat({default:"text-primary bg-accent",success:"text-success bg-success/10",warning:"text-warning bg-warning/10",destructive:"text-destructive bg-destructive/10"}[l]),children:(0,s.jsx)(a,{className:"h-6 w-6"})})]})})})}var m=r(594),f=r(9715),h=r(1847);let j=(0,h.A)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);var g=r(8874);let v=(0,h.A)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);var p=r(5894);function b(){let e=(0,n.useRouter)(),{toast:t}=(0,p.dj)(),[r,u]=(0,a.useState)(null),[h,b]=(0,a.useState)([]),[N,y]=(0,a.useState)({total:0,authorized:0,cancelled:0,pending:0}),[w,A]=(0,a.useState)(!0);(0,a.useEffect)(()=>{let t=(0,d.hg)(l.j2,async t=>{if(!t)return void e.push("/auth");u(t),await k(t.uid)});return()=>t()},[e]);let k=async e=>{try{let t=(0,i.rJ)(l.db,"invoices"),r=(0,i.P)(t,(0,i._M)("user_id","==",e),(0,i.My)("created_at","desc"),(0,i.AB)(20)),s=(await (0,i.GG)(r)).docs.map(e=>({id:e.id,...e.data()}));b(s);let a=s.length,n=s.filter(e=>"authorized"===e.status).length,d=s.filter(e=>"cancelled"===e.status).length,c=s.filter(e=>"pending"===e.status).length;y({total:a,authorized:n,cancelled:d,pending:c})}catch(e){t({title:"Error",description:e.message,variant:"destructive"})}finally{A(!1)}};return w?(0,s.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):(0,s.jsxs)("div",{className:"min-h-screen flex flex-col",children:[(0,s.jsx)(c.F,{user:r}),(0,s.jsxs)("div",{className:"flex flex-1",children:[(0,s.jsx)(o.B,{}),(0,s.jsx)("main",{className:"flex-1 p-8 bg-background",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto space-y-8",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold",children:"Dashboard"}),(0,s.jsx)("p",{className:"text-muted-foreground mt-2",children:"Overview of your NFC-e invoices"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,s.jsx)(x,{title:"Total Invoices",value:N.total,icon:f.A,variant:"default"}),(0,s.jsx)(x,{title:"Authorized",value:N.authorized,icon:j,variant:"success"}),(0,s.jsx)(x,{title:"Cancelled",value:N.cancelled,icon:g.A,variant:"destructive"}),(0,s.jsx)(x,{title:"Pending",value:N.pending,icon:v,variant:"warning"})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold",children:"Recent Invoices"}),(0,s.jsx)(m.Y,{invoices:h})]})]})})]})]})}},792:(e,t,r)=>{Promise.resolve().then(r.bind(r,706))},1647:(e,t,r)=>{"use strict";r.d(t,{E:()=>d});var s=r(5155);r(2115);var a=r(3101),n=r(4269);let l=(0,a.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function d(e){let{className:t,variant:r,...a}=e;return(0,s.jsx)("div",{className:(0,n.cn)(l({variant:r}),t),...a})}},7270:(e,t,r)=>{"use strict";r.d(t,{A0:()=>d,BF:()=>i,Hj:()=>c,XI:()=>l,nA:()=>u,nd:()=>o});var s=r(5155),a=r(2115),n=r(4269);let l=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{className:"relative w-full overflow-auto",children:(0,s.jsx)("table",{ref:t,className:(0,n.cn)("w-full caption-bottom text-sm",r),...a})})});l.displayName="Table";let d=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("thead",{ref:t,className:(0,n.cn)("[&_tr]:border-b",r),...a})});d.displayName="TableHeader";let i=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("tbody",{ref:t,className:(0,n.cn)("[&_tr:last-child]:border-0",r),...a})});i.displayName="TableBody",a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("tfoot",{ref:t,className:(0,n.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",r),...a})}).displayName="TableFooter";let c=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("tr",{ref:t,className:(0,n.cn)("border-b transition-colors data-[state=selected]:bg-muted hover:bg-muted/50",r),...a})});c.displayName="TableRow";let o=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("th",{ref:t,className:(0,n.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",r),...a})});o.displayName="TableHead";let u=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("td",{ref:t,className:(0,n.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",r),...a})});u.displayName="TableCell",a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("caption",{ref:t,className:(0,n.cn)("mt-4 text-sm text-muted-foreground",r),...a})}).displayName="TableCaption"}},e=>{e.O(0,[992,138,707,376,32,279,372,6,810,619,156,155,849,441,255,358],()=>e(e.s=792)),_N_E=e.O()}]);